<html>
  <head>
    <title>Tic Tac Toe</title>
    <style>
      body {
        background-color: rgb(46, 139, 87);
        font-size: 25px;
      }
      table {
        border: 5px solid rgb(76, 118, 134);
        border-collapse: collapse;
        background-color: rgb(147, 228, 231);
        border-radius: 25px;
      }
      #main{
        background-color: rgb(220, 228, 226);
        padding:5px;
      }
      tr,
      td {
        text-align: center;
        height: 100px;
        width: 100px;
        border: 5px solid rgb(76, 118, 134);
        border-radius: 25px;
      }
      button {
        padding: 10px;
        padding-left: 20px;
        padding-right: 20px;
        margin: 6px;
        background-color: brown;
        border-radius: 16px;
        font-size: medium;
        font-weight: bolder;
      }
    </style>
  </head>
  <body>
    <center>
      <h2>Tic Tac Toe Nitin Mujpara 5/2/24 24DEV084</h2>
      <h4 id="heading"></h4>
      <h5 id="result"></h5>
      <table>
        <tr>
          <td id="b1"></td>
          <td id="b2"></td>
          <td id="b3"></td>
        </tr>
        <tr>
          <td id="b4"></td>
          <td id="b5"></td>
          <td id="b6"></td>
        </tr>
        <tr>
          <td id="b7"></td>
          <td id="b8"></td>
          <td id="b9"></td>
        </tr>
      </table>
      <br />
      <button onclick="startgame()" id="btn">Start</button><br><br><br>

      <a id="main" href="/student/">Click Here To Redirect Home Page</a> 

    </center>

    <script>
      function startgame() {
        document.getElementById("heading").innerHTML = "Game Started";
        const btn = document.getElementById("btn");
        btn.style.visibility = "hidden";
        gamemove();
      }

      function gamemove() {
        let sign = "O";
        const td = document.querySelectorAll("td");
        for (let i = 0; i < td.length; i++) {
          td[i].addEventListener("click", function () {
            if (!td[i].innerHTML && sign === "O") {
              td[i].innerHTML = sign;

              sign = "X";
              // iswinmatch();
              if (iswinmatch() == true) {
                alert("Play again!");
                location.reload();
              }
              if (isboxesfull() == true) {
                alert("Play again!");
                location.reload();
              }
            } else {
              if (!td[i].innerHTML && sign === "X") {
                td[i].innerHTML = sign;

                sign = "O";
                if (iswinmatch() == true) {
                  alert("Play again!");
                  location.reload();
                }
                if (isboxesfull() == true) {
                  alert("Play again!");
                  location.reload();
                }
              }
            }
          });
        }
      }

      function iswinmatch() {
        const b1 = document.getElementById("b1").innerHTML;
        const b2 = document.getElementById("b2").innerHTML;
        const b3 = document.getElementById("b3").innerHTML;
        const b4 = document.getElementById("b4").innerHTML;
        const b5 = document.getElementById("b5").innerHTML;
        const b6 = document.getElementById("b6").innerHTML;
        const b7 = document.getElementById("b7").innerHTML;
        const b8 = document.getElementById("b8").innerHTML;
        const b9 = document.getElementById("b9").innerHTML;

        if (
          (b1 == "X" && b2 == "X" && b3 == "X") ||
          (b1 == "X" && b4 == "X" && b7 == "X") ||
          (b7 == "X" && b8 == "X" && b9 == "X") ||
          (b3 == "X" && b6 == "X" && b9 == "X") ||
          (b2 == "X" && b5 == "X" && b8 == "X") ||
          (b4 == "X" && b5 == "X" && b6 == "X") ||
          (b3 == "X" && b5 == "X" && b7 == "X") ||
          (b1 == "X" && b5 == "X" && b9 == "X")
        ) {
          alert("X is Winner");
          return true;
        } else if (
          (b1 == "O" && b2 == "O" && b3 == "O") ||
          (b1 == "O" && b4 == "O" && b7 == "O") ||
          (b7 == "O" && b8 == "O" && b9 == "O") ||
          (b3 == "O" && b6 == "O" && b9 == "O") ||
          (b2 == "O" && b5 == "O" && b8 == "O") ||
          (b4 == "O" && b5 == "O" && b6 == "O") ||
          (b3 == "O" && b5 == "O" && b7 == "O") ||
          (b1 == "O" && b5 == "O" && b9 == "O")
        ) {
          alert("O is Winner");
          return true;
        } else {
          return false;
        }
      }

      function isboxesfull() {
        const b1 = document.getElementById("b1").innerHTML;
        const b2 = document.getElementById("b2").innerHTML;
        const b3 = document.getElementById("b3").innerHTML;
        const b4 = document.getElementById("b4").innerHTML;
        const b5 = document.getElementById("b5").innerHTML;
        const b6 = document.getElementById("b6").innerHTML;
        const b7 = document.getElementById("b7").innerHTML;
        const b8 = document.getElementById("b8").innerHTML;
        const b9 = document.getElementById("b9").innerHTML;

        if (
          b1 == "" ||
          b2 == "" ||
          b3 == "" ||
          b4 == "" ||
          b5 == "" ||
          b6 == "" ||
          b7 == "" ||
          b8 == "" ||
          b9 == ""
        ) {
          return false;
        } else {
          return true;
        }
      }
    </script>
  </body>
</html>
